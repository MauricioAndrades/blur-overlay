"use strict";!function(t){t.widget("custom.blurOverlay",{options:{autoShow:!1,backgroundColor:"rgba(255, 255, 255, 0)",blurAmount:"12px",content:"<h1>Hello, blur overlay!</h1>",masks:[],maskColor:"rgba(255, 255, 255, 1)",maskOpacity:1,transitionDuration:"333ms",transitionType:"ease-in-out"},_create:function(){this.showing=!1,this.showDeferred=null,this.hideDeferred=null,this.transition=this.options.transitionDuration+" "+this.options.transitionType,this.masks=[],this._initWrapper(),this._initContent(),this._initOverlay(),this._initEvents(),this.options.autoShow&&this.show()},_destroy:function(){this.element.unwrap(),this.$overlay.remove(),t("body").css("overflow","auto")},show:function(){return this.showDeferred=t.Deferred(),this.showing||this._beforeShow(),this.showing=!0,this.showDeferred.promise()},hide:function(){return this.hideDeferred=t.Deferred(),this.showing&&this._beforeHide(),this.showing=!1,this.hideDeferred.promise()},content:function(t){var i="function"==typeof t;this.options.content=i?t():t,this.$content.html(this.options.content)},isShowing:function(){return this.showing},_initWrapper:function(){this.$wrapper=t("<div>").attr("class","blur-overlay-wrapper"),this.$wrapper.css({"-webkit-filter":"blur(0px)",filter:"blur(0px)","-webkit-transition":"-webkit-filter "+this.transition+", filter "+this.transition,transition:"-webkit-filter "+this.transition+", filter "+this.transition}),this.element.wrapAll(this.$wrapper),this.$wrapper=this.element.closest(".blur-overlay-wrapper").first()},_initContent:function(){this.$content=t("<div>").attr("class","blur-overlay-content"),this.$content.append(this.options.content),this.$content.hide()},_initOverlay:function(){this.$overlay=t("<div>").attr("class","blur-overlay-overlay"),this.$overlay.css({"z-index":1e3,"background-color":this.options.backgroundColor,opacity:0,"-webkit-transition":"opacity "+this.transition,transition:"opacity "+this.transition}),this.$overlay.appendTo("body"),this.$overlay.append(this.$content)},_initEvents:function(){var t=this;this.$overlay.on("transitionend webkitTransitionEnd",function(){t.showing?t._afterShow():t._afterHide()})},_addMasks:function(){var i=this;this.masks=[],this.options.masks.forEach(function(e){var o=t(e),s=o.offset(),n=t("<div>").attr("class","blur-overlay-mask");n.css({width:o.width(),height:o.height(),position:"fixed",top:s.top,left:s.left,opacity:0,transition:"opacity "+i.transition,"z-index":1e3,"background-color":i.options.maskColor}),o.after(n),i.masks.push({selector:e,$mask:n})})},_showMasks:function(){var t=this;this.masks.forEach(function(i){i.$mask.css({opacity:t.options.maskOpacity})})},_hideMasks:function(){this.masks.forEach(function(t){t.$mask.css({opacity:0})})},_removeMasks:function(){this.masks.forEach(function(t){t.$mask.remove()}),this.masks=[]},_beforeShow:function(){var i=this;console.log("_beforeShow"),this.element.trigger(t.Event("blurOverlay.beforeShow")),t("body").css("overflow","hidden"),this._addMasks(),setTimeout(function(){i.$wrapper.css({"-webkit-filter":"blur("+i.options.blurAmount+")",filter:"blur("+i.options.blurAmount+")"}),i.$overlay.css({position:"fixed",top:0,bottom:0,left:0,right:0,opacity:1}),i._showMasks(),i.$content.show()},0)},_afterShow:function(){console.log("_afterShow"),this.element.trigger(t.Event("blurOverlay.show")),this.showDeferred.resolve(!0)},_beforeHide:function(){var i=this;console.log("_beforeHide"),this.element.trigger(t.Event("blurOverlay.beforeHide")),t("body").css("overflow","auto"),setTimeout(function(){i.$wrapper.css({"-webkit-filter":"blur(0px)",filter:"blur(0px)"}),i.$overlay.css({opacity:0}),i._hideMasks()},0)},_afterHide:function(){console.log("_afterHide"),this.$overlay.css("position","relative"),this.$content.hide(),this._removeMasks(),this.element.trigger(t.Event("blurOverlay.hide")),this.hideDeferred.resolve(!0)}})}(jQuery);